<?xml version="1.0" ?>

<!-- MLS.xml
Compute the MLS transformation matrix \f$ L_i \f$.

Such transformation matrix can be multiplied by the kernel gradient to produce
a new kernel gradient,
\f$ \nabla W^{L}_{ij} = L_i \cdot \nabla W_{ij} \f$, such that the lienar fields
differential operators are consistently computed

This tool is just computing the kernel transforamtion matrix. The usage of such
matrix is responsibility of the user.

To use it, just include this file, and later set the set of particles affected,
mls_iset.

You can also include this preset several times to the MLS kernel transformation
matrix of several sets of particles. For instance:

<Include file="MLS.xml" prefix="iset0_"/>
<Include file="MLS.xml" prefix="iset2_"/>
<Tools>
    <Tool action="insert" before="iset0_MLS" type="set_scalar" name="MLS_iset0" in="mls_iset" value="0"/>
    <Tool action="insert" before="iset2_MLS" type="set_scalar" name="MLS_iset2" in="mls_iset" value="2"/>
</Tools>

The behaviour if this motion preset is imposed twice on the same object is
undefined.
-->

<sphInput>
    <Variables>
        <Variable name="mls_iset" type="unsigned int" value="0" />
        <Variable name="mls" type="matrix*" length="N" />
    </Variables>

    <Tools>
        <!-- Try to remove previous instances -->
        <Tool action="try_remove" name="MLS" type="dummy"/>
        <!-- Add the new instance -->
        <Tool action="insert" after="Sort" name="MLS" type="kernel" path="@RESOURCES_OUTPUT_DIR@/Scripts/basic/MLS.cl"/>
    </Tools>
</sphInput>
